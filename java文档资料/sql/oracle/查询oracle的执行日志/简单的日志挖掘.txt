


-- 使用第一个日志文件(可以是归档日志)
BEGIN
  DBMS_LOGMNR.ADD_LOGFILE(
    LOGFILENAME => 'C:\ORADATA\POWERPF\RED02_02.LOG',
    OPTIONS => DBMS_LOGMNR.NEW);
END;
/

-- 添加一个日志文件(可以是归档日志), 可以添加多个文件
BEGIN
  DBMS_LOGMNR.ADD_LOGFILE(
    LOGFILENAME => 'C:\ORADATA\POWERPF\RED03_02.LOG',
    OPTIONS => DBMS_LOGMNR.ADDFILE);
END;
/

-- 移除日志文件
BEGIN
  DBMS_LOGMNR.ADD_LOGFILE(
    LOGFILENAME => 'C:\ORADATA\POWERPF\RED03_02.LOG',
    OPTIONS => DBMS_LOGMNR.REMOVEFILE);
END;
/

-- 查看要挖掘的日志
SELECT * FROM V$LOGMNR_LOGS;

-- 开始分析,生成挖掘数据
BEGIN
  DBMS_LOGMNR.START_LOGMNR(OPTIONS=>DBMS_LOGMNR.DICT_FROM_ONLINE_CATALOG);
END;
/

-- 观察分析结果
SELECT * FROM V$LOGMNR_CONTENTS;

-- 结束日志挖掘
BEGIN
  DBMS_LOGMNR.END_LOGMNR;
END;
/